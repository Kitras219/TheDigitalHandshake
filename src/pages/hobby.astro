---
import Layout from "../layouts/layout.astro";
import Navbar from "../components/navbar.astro";
import Footer from "../components/footer.astro";
import HobbyCard from "../components/hobbycard.astro";
import { getCollection } from "astro:content";

// Pobieramy wszystkie wpisy z kolekcji "hobby"
const allHobbyPosts = await getCollection("hobby");

// Sortujemy wpisy od najnowszego do najstarszego
const sortedPosts = allHobbyPosts.sort(
  (a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf()
);

// Przygotowujemy dane do renderowania z góry.
const postsWithContent = await Promise.all(
  sortedPosts.map(async (post) => {
    const { Content } = await post.render();
    return { data: post.data, Content };
  })
);
---

<Layout title="Hobby">
  <Navbar />
  <main class="container mx-auto px-4 pt-12 pb-24 sm:pt-16 sm:pb-32">
    <div class="text-center">
      <h1 class="text-4xl sm:text-5xl font-bold mb-4">
        Hobby i Zainteresowania
      </h1>
      <p class="text-xl text-white/70 max-w-2xl mx-auto">
        Miejsce na moje przemyślenia, projekty poboczne i wszystko to, co mnie
        inspiruje poza pracą zawodową.
      </p>
    </div>

    <!-- Karuzela CSS -->
    <div class="mt-16">
      <div class="flex overflow-x-auto snap-x snap-mandatory space-x-6 pb-4">
        {
          postsWithContent.map(({ data, Content }) => (
            <HobbyCard title={data.title} image={data.image} tags={data.tags}>
              <Content />
            </HobbyCard>
          ))
        }
      </div>
    </div>
  </main>
  <Footer />
</Layout>

<style>
  /* Ukrycie paska przewijania dla estetyki, zachowując funkcjonalność */
  .overflow-x-auto::-webkit-scrollbar {
    display: none;
  }
  .overflow-x-auto {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }
</style>
